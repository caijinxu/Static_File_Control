<!DOCTYPE html>
<html>

  <head>
    <title>CMS文件管理平台</title>
      {% block head_meta %}
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
      {% endblock %}
{#      {% block head_css %}#}
{#        <link href="{{ url_for('static', filename='bootstrap/bootstrap3/swatch/default/bootstrap.min.css') }}" rel="stylesheet">#}
{#        <link href="{{ url_for('static', filename='bootstrap/bootstrap3/css/bootstrap-theme.min.css') }}" rel="stylesheet">#}
{#        <link href="{{ url_for('static', filename='admin/css/bootstrap3/admin.css') }}" rel="stylesheet">#}
{#        <style>#}
{#        body {#}
{#            padding-top: 4px;#}
{#        }#}
{#        </style>#}
{#      {% endblock %}#}
      {% block head %}
          	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
            <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
            <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
      {% endblock %}

  </head>

<body>
    {% block page_body %}
    <div class="container">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#admin-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          {% block brand %}
          <a class="navbar-brand" href={{ url_for('web.index') }}>CMS文件管理平台</a>
          {% endblock %}
        </div>
        <!-- navbar content -->
          {% block main_menu %}
          <ul class="nav navbar-nav">
{#            {{ layout.menu() }}#}
              <li class="dropdown">
                  <a data-toggle="dropdown" class="dropdown-toggle" href="#" data-toggle="dropdown" role="button">
                      恢复\删除
                      <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <li>
                          <a href={{ url_for('web.images_recover') }}>链接文件恢复\删除</a>
                      </li>
                      <li>
                          <a href={{ url_for('web.images_web') }}>页面包含图片恢复\删除</a>
                      </li>
                      <li role="separator" class="divider"></li>
                      <li>
                          <a href={{ url_for('web.history') }}>任务历史</a>
                      </li>


                  </ul>
              </li>
{#              <li>#}
{#                  <a href={{ url_for('web.images_recover') }}>链接恢复\删除</a>#}
{#              </li>#}
{#              <li>#}
{#                  <a href={{ url_for('web.images_web') }}>页面图片恢复\删除</a>#}
{#              </li>#}
{#              <li>#}
{#                  <a href={{ url_for('web.history') }}>任务历史</a>#}
{#              </li>#}
              <li>
                  <a href={{ url_for('web.flush_cdn') }}>CDN缓存刷新</a>
              </li>
              <li class="dropdown">
                  <a data-toggle="dropdown" class="dropdown-toggle" href={{ url_for('web.list_worker') }}>
                      分布节点
                      <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <li>
                          <a href={{ url_for('web.list_worker') }}>节点详情</a>
                      </li>
                      <li>
                          <a href={{ url_for('web.create_worker') }}>新建节点</a>
                      </li>
                      <li role="separator" class="divider"></li>
                      <li>
                          <a href={{ url_for('web.list_config') }}>配置列表</a>
                      </li>
                      <li>
                          <a href={{ url_for('web.create_config') }}>新建配置信息</a>
                      </li>
                  </ul>
              </li>
            <li class="dropdown">
                  <a data-toggle="dropdown" class="dropdown-toggle" href="#" data-toggle="dropdown" role="button">
                      图片白名单
                      <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <li>
                          <a href={{ url_for('whiteimage.index_view') }}>独立白名单图片</a>
                      </li>
                       <li role="separator" class="divider"></li>
                      <li>
                          <a href={{ url_for('whitewebimage.index_view') }}>白名单页面获取图片</a>
                      </li>
                      <li role="separator" class="divider"></li>
                      <li>
                          <a href={{ url_for('whitechannleimage.index_view') }}>白名单频道获取图片</a>
                      </li>
                      <li role="separator" class="divider"></li>
                      <li>
                          <a href={{ url_for('dailywhitewebimg.index_view') }}>频道首页每日更新图片</a>
                      </li>
                      <li role="separator" class="divider"></li>
                      <li>
                          <a href={{ url_for('retentimeimg.index_view') }}>指定保留天数频道图片</a>
                      </li>
                  </ul>
              </li>
             <li class="dropdown">
                  <a data-toggle="dropdown" class="dropdown-toggle" href="#" data-toggle="dropdown" role="button">
                      死链处理
                      <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <li>
                          <a href={{ url_for('web.deadlinks') }}>添加死链</a>
                      </li>
                      <li>
                          <a href={{ url_for('web.deadhistory') }}>死链处理历史</a>
                      </li>
                  </ul>
             </li>
                       <li class="dropdown">
                  <a data-toggle="dropdown" class="dropdown-toggle" href="#" data-toggle="dropdown" role="button">
                       文章搜索
                      <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <li>
                          <a href={{ url_for('web.article') }}>返回部分</a>
                      </li>
                      <li>
                          <a href={{ url_for('web.all_article') }}>返回全部</a>
                      </li>
                  </ul>
             </li>
          </ul>
          {% endblock %}

          {% block menu_links %}

          {% endblock %}
          {% block access_control %}
              <ul class="nav navbar-nav navbar-right">
                {% if not current_user.is_authenticated %}
                    <li><a href="{{ url_for('web.login') }}">登录</a></li>
                    <li><a style="margin-left: 40px;" href="{{ url_for('web.register') }}">注册</a></li>

                {% else %}
                    <li><a href="{{ url_for('web.images_recover') }}">{{ current_user.username }}</a></li>
                    <li><a href="{{ url_for('web.logout') }}">注销</a></li>
                {% endif %}
              </ul>
          {% endblock %}
      </nav>

      {% block messages %}
          {% with messages = get_flashed_messages() %}
            {% for message in messages %}
                {% if message %}
                    <div class="alert alert-warning" role="alert">{{ message }}</div>
                {% endif %}
            {% endfor %}
          {% endwith %}
         {% if form and form.errors %}
            {% for key, error in form.errors.items() %}
                <div class="alert alert-warning" role="alert">{{ error }}</div>
            {% endfor %}
         {% endif %}
      {% endblock %}

      {% block body %}{% endblock %}
    </div>
    {% endblock %}
</body>

{% block script %}
{% endblock %}
</html>